/*
This file is for overriding the Jupyter CSS. Any KBase-component
CSS should go in /kbase-extension/static/kbase/css/kbaseNarrative.css

(or the specific css file if available)
*/
#ipython-main-app {
  position: relative;
}

.select2-container--default .select2-results__option--highlighted[aria-selected] {
  background-color: rgb(51 122 183);
  color: rgb(255 255 255);

  span {
    color: rgb(255 255 255) !important;
  }
}

#site {
  overflow: visible;
}

/* disable the standard notebook, bottom spacer */

#notebook > .end_space {
  min-height: 0;
  height: 0;
}

@media (min-width: 1200px) {
  #notebook-container {
    width: auto;
  }
}

@media (min-width: 992px) {
  #notebook-container {
    width: auto;
  }
}

@media (min-width: 768px) {
  #notebook-container {
    width: auto;
  }
}

.notebook_app {
  overflow-y: hidden;
  background-color: rgb(255 255 255);
}

.celltoolbar {
  height: auto;
  background: none;
  border: none;
  border-left: 1px solid transparent;
  padding-top: 0;
  padding-bottom: 2px;
}

div {
  &.input_area {
    border: 1px solid rgb(206 206 206);
    border-radius: 0;

    /* a little padding to match the prompt */
    padding-top: 4px;
  }

  &.output_subarea {
    max-width: inherit;
  }

  &.text_cell_input {
    border: 1px solid rgb(206 206 206);
    border-radius: 0;
  }

  &.cell {
    margin: 8px 0;
    padding: 0;
    border: 1px solid rgb(204 204 204);
    border-left-width: 5px;
    border-radius: 0;

    &.selected {
      margin-left: 0;
      border: 1px solid rgb(75 184 86);
      border-left-width: 5px;
      padding-left: 0;
      transition: box-shadow 0.2s ease-in-out;
      box-shadow: 0 1px 2px rgb(170 170 170), 0 5px 5px rgb(170 170 170);
      background: none;

      &::before {
        background: none;
      }
    }

    &.opened {
      padding-top: 0;
    }
  }
}

.edit_mode div.cell.selected {
  border-left: 5px solid rgb(102 187 106);
  background: none;
  padding-left: 0;
}

div {
  &.cell.selected.kb-error {
    border: 1px solid rgb(217 83 79);
    border-left-width: 5px;
  }

  &#notebook {
    padding: 0;
  }
}

#notebook_name {
  color: rgb(0 102 152);

  &:hover {
    cursor: pointer;
    background-color: rgb(224 224 224);
  }
}

#notebook-container {
  box-shadow: none;
  width: auto;
  min-width: 460px;
  position: fixed;
  left: 380px;
  top: 70px;
  right: 0;
  bottom: 0;
  overflow: auto;

  &::after {
    content: "";
    height: 100px;
    display: block;
  }
}

/* margin left doesn't really seeem to play well */

.btn-toolbar {
  margin-left: 0;
  padding-left: 0;
}

.kb-narr-side-panel .btn-group .btn {
  padding: 3px 4px;
  font-size: 16px;
}

.btn-subtle {
  margin: 0;
  color: rgb(136 136 136);

  .fa {
    color: rgb(136 136 136);

    &::before {
      color: rgb(136 136 136);
    }
  }
}

.notebook_app {
  .btn.active {
    box-shadow: none;
  }

  .inner_cell {
    overflow: visible;
  }

  .celltoolbar > .button_container {
    flex: 0 auto;

    &:first-child {
      flex: auto;
    }
  }

  .celltoolbar_container {
    border-bottom: 1px solid rgb(192 192 192);
  }

  .prompt {
    padding-top: 0;
    color: rgb(192 192 192);
    width: 75px;
  }

  .cell {
    &.selected div.text_cell_render, &.unselected div.text_cell_render {
      border: 1px solid transparent;
    }
  }

  .buttons .dropdown-menu {
    height: auto !important;
    overflow: visible !important;
  }

  .btn.disabled .fa {
    color: rgb(192 192 192);
  }
}

/* Fooling around with the narrative cells */

.text_cell {
  &.kb-cell .rendered_html {
    table {
      border: 1px solid rgb(221 221 221);
    }

    ul {
      margin: 0;
    }
  }

  &.opened.rendered {
    &.kb-cell .rendered_html {
      padding: 0;
      border: 0;
    }

    &.selected.kb-cell {
      .rendered_html {
        border-left: 1px solid rgb(75 184 86);
      }

      &.kb-error .rendered_html {
        border-left: 1px solid rgb(217 83 79);
      }
    }

    &.kb-cell {
      padding-bottom: 0;
    }
  }
}

.rendered_html {
  td, th, tr {
    text-align: inherit;
  }

  table {
    table-layout: inherit;
  }
}

/* narrative cell icons */

.cell {
  &.selected {
    .prompt {
      .method-icon {
        color: rgb(103 58 183);
      }

      .app-icon {
        color: rgb(0 150 136);
      }

      .app-output-icon, .data-viewer-icon, .markdown-icon, .method-output-icon {
        color: rgb(0 0 0);
      }

      .error-icon {
        color: rgb(255 0 0);
      }

      &.input_prompt {
        color: rgb(48 63 159);
      }

      &.output_prompt {
        color: rgb(216 67 21);
      }
    }

    .btn-default {
      color: rgb(0 0 0);
    }
  }

  > .inner_cell > .ctb_hideshow {
    display: block;
  }

  &.unselected {
    .btn-default {
      color: rgb(204 204 204);
    }

    .kb-cell-toolbar {
      .title-container {
        opacity: 0.5;
      }

      .buttons-container {
        opacity: 0.2;
      }
    }
  }
}

.kb-btn-icon {
  display: inline-block;
  padding: 4px;

  .fa {
    opacity: 0.5;
  }

  &:hover .fa {
    opacity: 1;
  }
}

/*
  For some reason Jupyter removes the bottom margin. This causes problems with
   bootstrap, since bootstrap removes the top margin!
*/

p {
  margin-bottom: 9px;
}

.prompt {
  display: none !important;
}

/*
 * Jupyter 5.6.0 introduced a "run this cell" button that appears on mouseover.
 * Cool though this is, it's a problem on app cells.
 * This hunk of CSS should remove it until we can better work it in to our design.
 */

div.code_cell {
  &:hover {
    .run_this_cell, div.input_prompt.run_this_cell {
      visibility: hidden !important;
    }
  }

  div.input_prompt {
    min-width: 0;
  }
}

.run_this_cell {
  padding: 0 !important;
  width: 0 !important;
}
